function offset(n){var t=0,i=0;if(n.offsetParent){do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return{x:t,y:i}}return undefined}function makeRequest(n,t,i,r){var u=new XMLHttpRequest;u.onreadystatechange=function(){u.readyState===XMLHttpRequest.DONE&&(u.status===200?i&&i(u.responseText):r&&r(u))};u.open(n,t,!0);u.send()}function goTo(n,t){var i=this;t===void 0&&(t=50);var r=Math.max((typeof n=="number"?n:offset(sel(n)).y)-t,0),o=r-window.scrollY,u=o/20,f=-1,e=!1,s=0,h=setInterval(function(){e||i.userScroll?((document.readyState==="complete"||i.userScroll)&&(clearInterval(h),i.userScroll=!1),i.userScroll||window.scrollTo(0,r)):window.scrollY>r-u&&window.scrollY<r+u||!(f!==window.scrollY||s++<1)?e=!0:(f=window.scrollY,window.scrollTo(0,window.scrollY+u))},1e3/59.9)}function counterUp(){var n=selAll("[data-counterup]"),t=!1,i;n.length>0&&(i=offset(n[0]).y,window.addEventListener("scroll",function(){var r,f,u,e;if(!counterUpStarted&&window.scrollY+window.innerHeight>i){for(counterUpStarted=!0,r=0;r<n.length;r++)f=parseInt(n[r].innerText),n[r].innerText=n[r].innerText.replace(f.toString(),"0");u=.01;e=setInterval(function(){for(var i=0;i<n.length;i++){var r=n[i],f=parseInt(r.getAttribute("data-counterup")),s=parseInt(r.innerText),o=f*u;o>=f&&(t=!0,o=f);r.innerText=r.innerText.replace(s.toFixed(0),o.toFixed(0))}u+=.01;t&&clearInterval(e)},1e3/59.9)}}))}var sel=function(n){return document.querySelector(n)},selAll=function(n){return document.querySelectorAll(n)},userScroll=!1,counterUpStarted,Embedded,embedded,Gallery;window.addEventListener&&document.addEventListener("DOMMouseScroll",function(){return userScroll=!0},{passive:!0});document.addEventListener("mousewheel",function(){return userScroll=!0},{passive:!0});counterUpStarted=!1;Embedded=function(){function n(){for(var t=selAll(".youtube-player"),n=0;n<t.length;n++)this.embedItem(t[n],"youtube");for(t=selAll(".vimeo-player"),n=0;n<t.length;n++)this.embedItem(t[n],"vimeo");for(t=selAll(".iframe-player"),n=0;n<t.length;n++)this.embedItem(t[n],"iframe")}return n.prototype.embedItem=function(n,t){var o=this,r,i,f,e,u;t==="youtube"?(r=document.createElement("div"),r.setAttribute("data-id",n.dataset.id),i=document.createElement("img"),i.alt=n.title?n.title:"YoutTube",i.title=n.title?n.title:"YoutTube",n.offsetWidth>700?(i.src="https://i.ytimg.com/vi/ID/maxresdefault.jpg".replace("ID",n.dataset.id),i.setAttribute("fallback","https://i.ytimg.com/vi/ID/hqdefault.jpg".replace("ID",n.id)),i.onload=function(){i.naturalHeight===90&&i.naturalWidth===120&&i.src!==i.getAttribute("fallback")&&(i.src=null,i.src=i.getAttribute("fallback"))}):i.src="https://i.ytimg.com/vi/ID/hqdefault.jpg".replace("ID",n.dataset.id),u=document.createElement("div"),u.classList.add("play"),r.appendChild(i),r.appendChild(u),r.onclick=function(){return o.createVideo(!0,r)},n.appendChild(r)):t==="vimeo"?makeRequest("GET","https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+n.dataset.id,function(t){var f=JSON.parse(t),i,r,u;i=document.createElement("div");i.setAttribute("data-id",n.dataset.id);r=document.createElement("img");r.alt=n.title?n.title:"Vimeo";r.title=n.title?n.title:"Vimeo";r.src=f.thumbnail_url;u=document.createElement("div");u.classList.add("play");i.appendChild(r);i.appendChild(u);i.onclick=function(){return o.createVideo(!1,i)};sel('.vimeo-player[data-id="'+n.dataset.id+'"]').appendChild(i)},null):t==="iframe"&&(e=void 0,u=void 0,f=document.createElement("div"),f.setAttribute("data-src",n.dataset.id),e=document.createElement("img"),e.alt=n.title?n.title:"IFrame",e.title=n.title?n.title:"IFrame",e.src=n.dataset.thumb,u=document.createElement("div"),u.classList.add("play"),f.appendChild(e),f.appendChild(u),f.onclick=function(){return o.createIframe(f)},n.appendChild(f))},n.prototype.createVideo=function(n,t){var i=document.createElement("iframe"),r=n?"https://www.youtube.com/embed/ID?autoplay=1":"https://player.vimeo.com/video/ID?autoplay=1";i.setAttribute("src",r.replace("ID",t.dataset.id));i.setAttribute("frameborder","0");i.setAttribute("allowfullscreen","1");t.parentNode.replaceChild(i,t)},n.prototype.createIframe=function(n){var t=document.createElement("iframe");t.setAttribute("src",n.dataset.src);t.setAttribute("frameborder","0");t.setAttribute("allowfullscreen","1");n.parentNode.replaceChild(t,n)},n}(),function(){embedded=new Embedded}();
/*! Gallery
Beispiele:
<img data-target="http://static.4players.de/sourcen/portal/4players/2017/header_title_2017.png" src="~/images/Logo-SoftSolutions.png" />
<a href="http://static.4players.de/sourcen/portal/4players/2017/header_title_2017.png" data-imageViewer title="Bild">
    <img src="~/images/Logo-SoftSolutions.png" />
</a>
<a data-type="iframe" data-imageViewer title="Iframe" data-target="https://view.mylumion.com/?p=u3gouj8x&embed=1&iframe=true" data-thumb="https://content.lumion3d.com/lumiondotcom-content/2015/06/u3gouj8xview_4_thumb.jpg">
    <img src="~/images/Logo-SoftSolutions.png" />
</a>
<a data-target="k3tQaWxaLzM" data-type="youtube" data-imageViewer title="Youtube">
    <img src="~/images/Logo-SoftSolutions.png" />
</a>
<a data-target="http://www.4players.de/" data-imageViewer title="Link">
    <img src="~/images/Logo-SoftSolutions.png" />
</a>
<a data-target="#bla" data-imageViewer title="4Players">
    <img src="~/images/Logo-SoftSolutions.png" />
</a>
<div id="bla" hidden>
    <span>Hallo Welt</span>
</div>
*/
Gallery=function(){function n(n){var u=this,r,t,i;for(this.items=[],this._currentIndex=0,r=this,t=0;t<n.length;t++)i=n[t],i.onclick=function(n){r.onItemClicked(this,n);n.preventDefault();n.stopPropagation()},this.items.push(i);this.initMarkup();window.addEventListener("resize",function(){u.updateImageSize()},{passive:!0})}return n.prototype.initMarkup=function(){var o=this,a=sel("body"),t=document.createElement("div"),n,i,r,u,h,f,c,e,s,l;t.classList.add("imageViewer");this._main=t;n=document.createElement("div");n.classList.add("imageViewer-wrapper");t.appendChild(n);i=document.createElement("div");i.classList.add("imageViewer-content");r=document.createElement("div");r.classList.add("container");i.appendChild(r);i.onclick=function(n){return o.close(n)};r.onclick=function(n){return n.stopPropagation()};this._content=r;n.appendChild(i);this.items.length>1&&(u=document.createElement("span"),u.classList.add("imageViewer-prev"),h=document.createElement("span"),h.innerText="<",u.onclick=function(){return o.prev()},u.appendChild(h),n.appendChild(u),f=document.createElement("span"),c=document.createElement("span"),c.innerText=">",f.onclick=function(){return o.next()},f.appendChild(c),f.classList.add("imageViewer-next"),n.appendChild(f));e=document.createElement("span");e.innerText="X";e.classList.add("imageViewer-close");e.onclick=function(){return o.close(null)};n.appendChild(e);s=document.createElement("div");s.classList.add("imageViewer-caption");l=document.createElement("span");s.appendChild(l);this._captionContent=l;t.appendChild(s);a.appendChild(t)},n.prototype.onItemClicked=function(n){this._currentItems=this.items.filter(function(t){return t.getAttribute("data-imageViewer")===n.getAttribute("data-imageViewer")});this._currentIndex=this._currentItems.indexOf(n);this.loadContent();this._main.style.display="block"},n.prototype.loadContent=function(){var o=this,t,i,r,e,n,c,s,u,h,f;if(this._dimension=null,t=this._currentItems[this._currentIndex],i=t.getAttribute("data-target"),!i)if(t instanceof HTMLAnchorElement)i=t.href;else if(t instanceof HTMLImageElement)i=t.src;else throw new Error("No data-target");if(r=t.getAttribute("data-type"),r||(r=i[0]==="#"?"ref":i.slice(-4).toLowerCase()===".png"||i.slice(-4).toLowerCase()===".jpg"?"image":""),this._originElement){for(u=0;u<this._content.children[0].children.length;u++)this._originElement.appendChild(this._content.children[0].children[u]);this._originElement=null}if(r==="image")e=new Image,e.src=i,e.onload=function(){o._dimension={};o._dimension.width=e.width;o._dimension.height=e.height;o.updateImageSize()},this._content.parentElement.style.backgroundImage="url("+i+")",this._content.innerHTML="";else if(r==="youtube")n=document.createElement("div"),n.classList.add("youtube-player"),n.setAttribute("data-id",i),n.setAttribute("title",t.title),this.updateContainer(n),embedded.embedItem(n,"youtube");else if(r==="vimeo")n=document.createElement("div"),n.classList.add("vimeo-player"),n.setAttribute("data-id",i),n.setAttribute("title",t.title),this.updateContainer(n),embedded.embedItem(n,"vimeo");else if(r==="iframe")n=document.createElement("div"),c=t instanceof HTMLImageElement?t.src:t.getAttribute("data-thumb"),n.classList.add("iframe-player"),n.setAttribute("data-id",i),n.setAttribute("title",t.title),n.setAttribute("data-thumb",c),this.updateContainer(n),embedded.embedItem(n,"iframe");else if(r==="ref"){for(s=document.createElement("div"),i="#"+i.split("#").slice(-1)[0],this._originElement=sel(i),this._originElement||(s.innerHTML="Konnte nicht geladen werden!"),u=0;u<this._originElement.children.length;u++)s.appendChild(this._originElement.children[u]);this.updateContainer(s)}else h=document.createElement("iframe"),h.src=i,this.updateContainer(h);f=t.getAttribute("title");f||(f=t.getAttribute("name"),f||(f=t.getAttribute("alt")));this._captionContent.innerText=f?f:""},n.prototype.updateImageSize=function(){this._content.parentElement.style.backgroundSize=this._dimension?this._dimension.width<this._content.parentElement.clientWidth&&this._dimension.height<this._content.parentElement.clientHeight?this._dimension.width+"px "+this._dimension.height+"px":"contain":"contain"},n.prototype.updateContainer=function(n){this._content.parentElement.style.backgroundImage="";n instanceof HTMLIFrameElement?this._content.classList.add("full"):this._content.classList.remove("full");var t=this._content.children.item(0);t&&this._content.removeChild(t);this._content.appendChild(n)},n.prototype.next=function(){++this._currentIndex===this._currentItems.length&&(this._currentIndex=0);this.loadContent()},n.prototype.prev=function(){--this._currentIndex<0&&(this._currentIndex=this._currentItems.length-1);this.loadContent()},n.prototype.close=function(n){var t,i;if(n&&this._dimension){var r=n.screenX?n.screenX:n.x,u=n.screenY?n.screenY:n.y,f=r>window.innerWidth/4&&r<window.innerWidth/4*3,e=u>window.innerHeight/4&&u<window.innerHeight/4*3;if(f&&e)return}if(this._originElement){for(t=0;t<this._content.children[0].children.length;t++)this._originElement.appendChild(this._content.children[0].children[t]);this._originElement=null}i=this._content.children.item(0);i&&this._content.removeChild(i);this._main.style.display="none"},n}(),function(){var i=selAll("[data-imageviewer]"),u,n,r,t;if(i.length>0&&(u=new Gallery(i)),n=selAll(".img-description img"),n.length>0)for(r=function(){var i=n[t];i.complete?i.parentElement.classList.add("loaded"):i.onload=function(){i.parentElement.classList.add("loaded")}},t=0;t<n.length;t++)r()}();